<div class="formulario-zapaideal-container">
  <h2>Responde unas preguntas para encontrar tu zapatilla ideal</h2>
  <div *ngIf="!showResult">
    <div class="zapaideal-progress-bar">
      <div class="zapaideal-progress" [style.width]="((preguntaActual+1)/preguntas.length*100)+'%'" ></div>
    </div>
    <h1 class="zapaideal-title">{{ preguntas[preguntaActual].texto }}</h1>
    <p class="zapaideal-sub">Selecciona una opción</p>
    <div class="zapaideal-opciones">
      <button *ngFor="let opcion of preguntas[preguntaActual].opciones"
              [class.selected]="respuestas[preguntaActual] === opcion"
              (click)="seleccionarOpcion(opcion)"
              class="zapaideal-opcion-btn">
        {{ opcion }}
      </button>
    </div>
    <button *ngIf="preguntaActual < preguntas.length - 1" class="zapaideal-siguiente-btn" (click)="siguientePregunta()" [disabled]="!respuestas[preguntaActual]">SIGUIENTE</button>
    <button *ngIf="preguntaActual === preguntas.length - 1" class="zapaideal-siguiente-btn" (click)="finalizarTest()" [disabled]="!respuestas[preguntaActual]">FINALIZAR</button>
  </div>
  <div *ngIf="showResult" class="zapaideal-resultado">
    <h2>¡Tu zapatilla ideal es!</h2>
    <div class="zapaideal-tarjeta-resultado" *ngIf="zapatillaIdeal; else sinZapatilla">
      <div class="zapatilla-card" style="background:#181818; border-radius:1.5rem; box-shadow:0 4px 16px #ff3b3b22; padding:2rem; max-width:320px; margin:auto; display:flex; flex-direction:column; align-items:center;">
        <img *ngIf="zapatillaIdeal.images && zapatillaIdeal.images.length > 0" [src]="zapatillaIdeal.images[0]" alt="Imagen zapatilla" style="width:220px; height:220px; object-fit:cover; border-radius:1rem; border:3.5px solid #ff3b3b; margin-bottom:1.4rem; background:#fff;">
        <div class="zapatilla-info" style="color:#fff; text-align:center;">
          <div class="zapatilla-nombre" style="font-weight:900; font-size:1.5rem; margin-bottom:0.7rem;">{{ zapatillaIdeal.name }}</div>
          <div class="zapatilla-marca" style="font-size:1.1rem; margin-bottom:0.5rem;">Marca: {{ zapatillaIdeal.brand }}</div>
          <div class="zapatilla-precio" style="color:#ff3b3b; font-weight:900; font-size:1.3rem;">{{ zapatillaIdeal.price }} €</div>
        </div>
      </div>
    </div>
    <ng-template #sinZapatilla>
      <p>No se encontró una zapatilla ideal para tus preferencias.</p>
    </ng-template>
  </div>
</div>
